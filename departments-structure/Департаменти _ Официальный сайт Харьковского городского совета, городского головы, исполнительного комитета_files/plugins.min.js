
jQuery.cookie=function(B,I,L){if(typeof I!="undefined"){L=L||{};if(I===null){I="";L.expires=-1}var E="";if(L.expires&&(typeof L.expires=="number"||L.expires.toUTCString)){var F;if(typeof L.expires=="number"){F=new Date();F.setTime(F.getTime()+(L.expires*24*60*60*1000))}else{F=L.expires}E="; expires="+F.toUTCString()}var K=L.path?"; path="+(L.path):"";var G=L.domain?"; domain="+(L.domain):"";var A=L.secure?"; secure":"";document.cookie=[B,"=",encodeURIComponent(I),E,K,G,A].join("")}else{var D=null;if(document.cookie&&document.cookie!=""){var J=document.cookie.split(";");for(var H=0;H<J.length;H++){var C=jQuery.trim(J[H]);if(C.substring(0,B.length+1)==(B+"=")){D=decodeURIComponent(C.substring(B.length+1));break}}}return D}};(function($){function Countdown(){this.regional=[];this.regional['']={labels:['Years','Months','Weeks','Days','Hours','Minutes','Seconds'],labels1:['Year','Month','Week','Day','Hour','Minute','Second'],compactLabels:['y','m','w','d'],whichLabels:null,timeSeparator:':',isRTL:false};this._defaults={until:null,since:null,timezone:null,serverSync:null,format:'dHMS',layout:'',compact:false,significant:0,description:'',expiryUrl:'',expiryText:'',alwaysExpire:false,onExpiry:null,onTick:null,tickInterval:1};$.extend(this._defaults,this.regional['']);this._serverSyncs=[]}var w='countdown';var Y=0;var O=1;var W=2;var D=3;var H=4;var M=5;var S=6;$.extend(Countdown.prototype,{markerClassName:'hasCountdown',_timer:setInterval(function(){$.countdown._updateTargets()},980),_timerTargets:[],setDefaults:function(a){this._resetExtraLabels(this._defaults,a);extendRemove(this._defaults,a||{})},UTCDate:function(a,b,c,e,f,g,h,i){if(typeof b=='object'&&b.constructor==Date){i=b.getMilliseconds();h=b.getSeconds();g=b.getMinutes();f=b.getHours();e=b.getDate();c=b.getMonth();b=b.getFullYear()}var d=new Date();d.setUTCFullYear(b);d.setUTCDate(1);d.setUTCMonth(c||0);d.setUTCDate(e||1);d.setUTCHours(f||0);d.setUTCMinutes((g||0)-(Math.abs(a)<30?a*60:a));d.setUTCSeconds(h||0);d.setUTCMilliseconds(i||0);return d},periodsToSeconds:function(a){return a[0]*31557600+a[1]*2629800+a[2]*604800+a[3]*86400+a[4]*3600+a[5]*60+a[6]},_settingsCountdown:function(a,b){if(!b){return $.countdown._defaults}var c=$.data(a,w);return(b=='all'?c.options:c.options[b])},_attachCountdown:function(a,b){var c=$(a);if(c.hasClass(this.markerClassName)){return}c.addClass(this.markerClassName);var d={options:$.extend({},b),_periods:[0,0,0,0,0,0,0]};$.data(a,w,d);this._changeCountdown(a)},_addTarget:function(a){if(!this._hasTarget(a)){this._timerTargets.push(a)}},_hasTarget:function(a){return($.inArray(a,this._timerTargets)>-1)},_removeTarget:function(b){this._timerTargets=$.map(this._timerTargets,function(a){return(a==b?null:a)})},_updateTargets:function(){for(var i=this._timerTargets.length-1;i>=0;i--){this._updateCountdown(this._timerTargets[i])}},_updateCountdown:function(a,b){var c=$(a);b=b||$.data(a,w);if(!b){return}c.html(this._generateHTML(b));c[(this._get(b,'isRTL')?'add':'remove')+'Class']('countdown_rtl');var d=this._get(b,'onTick');if(d){var e=b._hold!='lap'?b._periods:this._calculatePeriods(b,b._show,this._get(b,'significant'),new Date());var f=this._get(b,'tickInterval');if(f==1||this.periodsToSeconds(e)%f==0){d.apply(a,[e])}}var g=b._hold!='pause'&&(b._since?b._now.getTime()<b._since.getTime():b._now.getTime()>=b._until.getTime());if(g&&!b._expiring){b._expiring=true;if(this._hasTarget(a)||this._get(b,'alwaysExpire')){this._removeTarget(a);var h=this._get(b,'onExpiry');if(h){h.apply(a,[])}var i=this._get(b,'expiryText');if(i){var j=this._get(b,'layout');b.options.layout=i;this._updateCountdown(a,b);b.options.layout=j}var k=this._get(b,'expiryUrl');if(k){window.location=k}}b._expiring=false}else if(b._hold=='pause'){this._removeTarget(a)}$.data(a,w,b)},_changeCountdown:function(a,b,c){b=b||{};if(typeof b=='string'){var d=b;b={};b[d]=c}var e=$.data(a,w);if(e){this._resetExtraLabels(e.options,b);extendRemove(e.options,b);this._adjustSettings(a,e);$.data(a,w,e);var f=new Date();if((e._since&&e._since<f)||(e._until&&e._until>f)){this._addTarget(a)}this._updateCountdown(a,e)}},_resetExtraLabels:function(a,b){var c=false;for(var n in b){if(n!='whichLabels'&&n.match(/[Ll]abels/)){c=true;break}}if(c){for(var n in a){if(n.match(/[Ll]abels[0-9]/)){a[n]=null}}}},_adjustSettings:function(a,b){var c;var d=this._get(b,'serverSync');var e=0;var f=null;for(var i=0;i<this._serverSyncs.length;i++){if(this._serverSyncs[i][0]==d){f=this._serverSyncs[i][1];break}}if(f!=null){e=(d?f:0);c=new Date()}else{var g=(d?d.apply(a,[]):null);c=new Date();e=(g?c.getTime()-g.getTime():0);this._serverSyncs.push([d,e])}var h=this._get(b,'timezone');h=(h==null?-c.getTimezoneOffset():h);b._since=this._get(b,'since');if(b._since!=null){b._since=this.UTCDate(h,this._determineTime(b._since,null));if(b._since&&e){b._since.setMilliseconds(b._since.getMilliseconds()+e)}}b._until=this.UTCDate(h,this._determineTime(this._get(b,'until'),c));if(e){b._until.setMilliseconds(b._until.getMilliseconds()+e)}b._show=this._determineShow(b)},_destroyCountdown:function(a){var b=$(a);if(!b.hasClass(this.markerClassName)){return}this._removeTarget(a);b.removeClass(this.markerClassName).empty();$.removeData(a,w)},_pauseCountdown:function(a){this._hold(a,'pause')},_lapCountdown:function(a){this._hold(a,'lap')},_resumeCountdown:function(a){this._hold(a,null)},_hold:function(a,b){var c=$.data(a,w);if(c){if(c._hold=='pause'&&!b){c._periods=c._savePeriods;var d=(c._since?'-':'+');c[c._since?'_since':'_until']=this._determineTime(d+c._periods[0]+'y'+d+c._periods[1]+'o'+d+c._periods[2]+'w'+d+c._periods[3]+'d'+d+c._periods[4]+'h'+d+c._periods[5]+'m'+d+c._periods[6]+'s');this._addTarget(a)}c._hold=b;c._savePeriods=(b=='pause'?c._periods:null);$.data(a,w,c);this._updateCountdown(a,c)}},_getTimesCountdown:function(a){var b=$.data(a,w);return(!b?null:(!b._hold?b._periods:this._calculatePeriods(b,b._show,this._get(b,'significant'),new Date())))},_get:function(a,b){return(a.options[b]!=null?a.options[b]:$.countdown._defaults[b])},_determineTime:function(k,l){var m=function(a){var b=new Date();b.setTime(b.getTime()+a*1000);return b};var n=function(a){a=a.toLowerCase();var b=new Date();var c=b.getFullYear();var d=b.getMonth();var e=b.getDate();var f=b.getHours();var g=b.getMinutes();var h=b.getSeconds();var i=/([+-]?[0-9]+)\s*(s|m|h|d|w|o|y)?/g;var j=i.exec(a);while(j){switch(j[2]||'s'){case's':h+=parseInt(j[1],10);break;case'm':g+=parseInt(j[1],10);break;case'h':f+=parseInt(j[1],10);break;case'd':e+=parseInt(j[1],10);break;case'w':e+=parseInt(j[1],10)*7;break;case'o':d+=parseInt(j[1],10);e=Math.min(e,$.countdown._getDaysInMonth(c,d));break;case'y':c+=parseInt(j[1],10);e=Math.min(e,$.countdown._getDaysInMonth(c,d));break}j=i.exec(a)}return new Date(c,d,e,f,g,h,0)};var o=(k==null?l:(typeof k=='string'?n(k):(typeof k=='number'?m(k):k)));if(o)o.setMilliseconds(0);return o},_getDaysInMonth:function(a,b){return 32-new Date(a,b,32).getDate()},_normalLabels:function(a){return a},_generateHTML:function(c){var d=this._get(c,'significant');c._periods=(c._hold?c._periods:this._calculatePeriods(c,c._show,d,new Date()));var e=false;var f=0;var g=d;var h=$.extend({},c._show);for(var i=Y;i<=S;i++){e|=(c._show[i]=='?'&&c._periods[i]>0);h[i]=(c._show[i]=='?'&&!e?null:c._show[i]);f+=(h[i]?1:0);g-=(c._periods[i]>0?1:0)}var j=[false,false,false,false,false,false,false];for(var i=S;i>=Y;i--){if(c._show[i]){if(c._periods[i]){j[i]=true}else{j[i]=g>0;g--}}}var k=this._get(c,'compact');var l=this._get(c,'layout');var m=(k?this._get(c,'compactLabels'):this._get(c,'labels'));var n=this._get(c,'whichLabels')||this._normalLabels;var o=this._get(c,'timeSeparator');var p=this._get(c,'description')||'';var q=function(a){var b=$.countdown._get(c,'compactLabels'+n(c._periods[a]));return(h[a]?c._periods[a]+(b?b[a]:m[a])+' ':'')};var r=function(a){var b=$.countdown._get(c,'labels'+n(c._periods[a]));return((!d&&h[a])||(d&&j[a])?'<span class="countdown_section"><span class="countdown_amount">'+c._periods[a]+'</span><br/>'+(b?b[a]:m[a])+'</span>':'')};return(l?this._buildLayout(c,h,l,k,d,j):((k?'<span class="countdown_row countdown_amount'+(c._hold?' countdown_holding':'')+'">'+q(Y)+q(O)+q(W)+q(D)+(h[H]?this._minDigits(c._periods[H],2):'')+(h[M]?(h[H]?o:'')+this._minDigits(c._periods[M],2):'')+(h[S]?(h[H]||h[M]?o:'')+this._minDigits(c._periods[S],2):''):'<span class="countdown_row countdown_show'+(d||f)+(c._hold?' countdown_holding':'')+'">'+r(Y)+r(O)+r(W)+r(D)+r(H)+r(M)+r(S))+'</span>'+(p?'<span class="countdown_row countdown_descr">'+p+'</span>':'')))},_buildLayout:function(c,d,e,f,g,h){var j=this._get(c,(f?'compactLabels':'labels'));var k=this._get(c,'whichLabels')||this._normalLabels;var l=function(a){return($.countdown._get(c,(f?'compactLabels':'labels')+k(c._periods[a]))||j)[a]};var m=function(a,b){return Math.floor(a/b)%10};var o={desc:this._get(c,'description'),sep:this._get(c,'timeSeparator'),yl:l(Y),yn:c._periods[Y],ynn:this._minDigits(c._periods[Y],2),ynnn:this._minDigits(c._periods[Y],3),y1:m(c._periods[Y],1),y10:m(c._periods[Y],10),y100:m(c._periods[Y],100),y1000:m(c._periods[Y],1000),ol:l(O),on:c._periods[O],onn:this._minDigits(c._periods[O],2),onnn:this._minDigits(c._periods[O],3),o1:m(c._periods[O],1),o10:m(c._periods[O],10),o100:m(c._periods[O],100),o1000:m(c._periods[O],1000),wl:l(W),wn:c._periods[W],wnn:this._minDigits(c._periods[W],2),wnnn:this._minDigits(c._periods[W],3),w1:m(c._periods[W],1),w10:m(c._periods[W],10),w100:m(c._periods[W],100),w1000:m(c._periods[W],1000),dl:l(D),dn:c._periods[D],dnn:this._minDigits(c._periods[D],2),dnnn:this._minDigits(c._periods[D],3),d1:m(c._periods[D],1),d10:m(c._periods[D],10),d100:m(c._periods[D],100),d1000:m(c._periods[D],1000),hl:l(H),hn:c._periods[H],hnn:this._minDigits(c._periods[H],2),hnnn:this._minDigits(c._periods[H],3),h1:m(c._periods[H],1),h10:m(c._periods[H],10),h100:m(c._periods[H],100),h1000:m(c._periods[H],1000),ml:l(M),mn:c._periods[M],mnn:this._minDigits(c._periods[M],2),mnnn:this._minDigits(c._periods[M],3),m1:m(c._periods[M],1),m10:m(c._periods[M],10),m100:m(c._periods[M],100),m1000:m(c._periods[M],1000),sl:l(S),sn:c._periods[S],snn:this._minDigits(c._periods[S],2),snnn:this._minDigits(c._periods[S],3),s1:m(c._periods[S],1),s10:m(c._periods[S],10),s100:m(c._periods[S],100),s1000:m(c._periods[S],1000)};var p=e;for(var i=Y;i<=S;i++){var q='yowdhms'.charAt(i);var r=new RegExp('\\{'+q+'<\\}(.*)\\{'+q+'>\\}','g');p=p.replace(r,((!g&&d[i])||(g&&h[i])?'$1':''))}$.each(o,function(n,v){var a=new RegExp('\\{'+n+'\\}','g');p=p.replace(a,v)});return p},_minDigits:function(a,b){a=''+a;if(a.length>=b){return a}a='0000000000'+a;return a.substr(a.length-b)},_determineShow:function(a){var b=this._get(a,'format');var c=[];c[Y]=(b.match('y')?'?':(b.match('Y')?'!':null));c[O]=(b.match('o')?'?':(b.match('O')?'!':null));c[W]=(b.match('w')?'?':(b.match('W')?'!':null));c[D]=(b.match('d')?'?':(b.match('D')?'!':null));c[H]=(b.match('h')?'?':(b.match('H')?'!':null));c[M]=(b.match('m')?'?':(b.match('M')?'!':null));c[S]=(b.match('s')?'?':(b.match('S')?'!':null));return c},_calculatePeriods:function(c,d,e,f){c._now=f;c._now.setMilliseconds(0);var g=new Date(c._now.getTime());if(c._since){if(f.getTime()<c._since.getTime()){c._now=f=g}else{f=c._since}}else{g.setTime(c._until.getTime());if(f.getTime()>c._until.getTime()){c._now=f=g}}var h=[0,0,0,0,0,0,0];if(d[Y]||d[O]){var i=$.countdown._getDaysInMonth(f.getFullYear(),f.getMonth());var j=$.countdown._getDaysInMonth(g.getFullYear(),g.getMonth());var k=(g.getDate()==f.getDate()||(g.getDate()>=Math.min(i,j)&&f.getDate()>=Math.min(i,j)));var l=function(a){return(a.getHours()*60+a.getMinutes())*60+a.getSeconds()};var m=Math.max(0,(g.getFullYear()-f.getFullYear())*12+g.getMonth()-f.getMonth()+((g.getDate()<f.getDate()&&!k)||(k&&l(g)<l(f))?-1:0));h[Y]=(d[Y]?Math.floor(m/12):0);h[O]=(d[O]?m-h[Y]*12:0);f=new Date(f.getTime());var n=(f.getDate()==i);var o=$.countdown._getDaysInMonth(f.getFullYear()+h[Y],f.getMonth()+h[O]);if(f.getDate()>o){f.setDate(o)}f.setFullYear(f.getFullYear()+h[Y]);f.setMonth(f.getMonth()+h[O]);if(n){f.setDate(o)}}var p=Math.floor((g.getTime()-f.getTime())/1000);var q=function(a,b){h[a]=(d[a]?Math.floor(p/b):0);p-=h[a]*b};q(W,604800);q(D,86400);q(H,3600);q(M,60);q(S,1);if(p>0&&!c._since){var r=[1,12,4.3482,7,24,60,60];var s=S;var t=1;for(var u=S;u>=Y;u--){if(d[u]){if(h[s]>=t){h[s]=0;p=1}if(p>0){h[u]++;p=0;s=u;t=1}}t*=r[u]}}if(e){for(var u=Y;u<=S;u++){if(e&&h[u]){e--}else if(!e){h[u]=0}}}return h}});function extendRemove(a,b){$.extend(a,b);for(var c in b){if(b[c]==null){a[c]=null}}return a}$.fn.countdown=function(a){var b=Array.prototype.slice.call(arguments,1);if(a=='getTimes'||a=='settings'){return $.countdown['_'+a+'Countdown'].apply($.countdown,[this[0]].concat(b))}return this.each(function(){if(typeof a=='string'){$.countdown['_'+a+'Countdown'].apply($.countdown,[this].concat(b))}else{$.countdown._attachCountdown(this,a)}})};$.countdown=new Countdown()})(jQuery);;if(window.jQuery)(function($){$.extend($,{fck:{waitFor:10,config:{Config:{}},path:'/fckeditor/',editors:[],loaded:false,intercepted:null,content:function(i,v){try{var x=FCKeditorAPI.GetInstance(i);if(v)x.SetHTML(v);return x.GetXHTML(true);}catch(e){return'';};},setHTML:function(i,v){if(typeof i=='object'){v=i.html;i=i.InstanceName||i.instance;};return $.fck.content(i,v);},update:function(){var e=$.fck.editors;for(var i=0;i<e.length;i++){var ta=e[i].textarea;var ht=$.fck.content(e[i].InstanceName);ta.val(ht).filter('textarea').text(ht);if(ht!=ta.val())
alert('Critical error in FCK plugin:'+'\n'+'Unable to update form data');}},clean:function(){var a=$.fck.editors,b={},c=[];$.each(a,function(){if($('#'+this.InstanceName+', textarea[name='+this.InstanceName+']').length>0)
b[this.InstanceName]=this;});$.each(b,function(){c[c.length]=this;});$.fck.editors=c;},create:function(option){var o=$.extend({},$.fck.config||{},option||{});$.extend(o,{selector:(o.selector||'textarea.fck, textarea.fckeditor'),BasePath:(o.path||o.BasePath||$.fck.path)});var e=$(o.e);if(!e.length>0)e=$(o.selector);if(!e.length>0)return;o=$.extend({},o,($.meta?e.data():($.metadata?e.metadata():null))||{});if(!$.fck.loading&&!$.fck.loaded){$.fck.loading=true;$.getScript(o.BasePath+'fckeditor.js',function(){$.fck.loaded=true;});};var start=function(){if($.fck.loaded){$.fck.editor(e,o);}
else{if($.fck.waited<=0){alert('jQuery.fckeditor plugin error: The FCKEditor script did not load.');}
else{$.fck.waitFor--;window.setTimeout(start,1000);};}};start(e);return e;},intercept:function(){if($.fck.intercepted)return;$.fck.intercepted={ajaxSubmit:$.fn.ajaxSubmit||function(){}};$.fn.ajaxSubmit=function(){$.fck.update();return $.fck.intercepted.ajaxSubmit.apply(this,arguments);};},editor:function(e,o){o=$.extend({},$.fck.config||{},o||{});$.extend(o,{Width:(o.width||o.Width||'100%'),Height:(o.height||o.Height||'500px'),BasePath:(o.path||o.BasePath||$.fck.path),ToolbarSet:(o.toolbar||o.ToolbarSet||'Default'),Config:(o.config||o.Config||{})});e=$(e);if(e.size()>0){var a=$.fck.editors;e.each(function(i,t){if((t.tagName||'').toLowerCase()!='textarea')
return alert(['An invalid parameter has been passed to the $.fckeditor.editor function','tagName:'+t.tagName,'name:'+t.name,'id:'+t.id].join('\n'));var T=$(t);if(!t.name)t.name='fck'+($.fck.editors.length+1);if(!t.id)t.id=t.name;if(t.id&&!t.fck){var n=a.length;a[n]=new FCKeditor(t.name);$.extend(a[n],o,o.Config||{});a[n].ReplaceTextarea();a[n].textarea=T;t.fck=a[n];};});$.fck.editors=a;$.fck.clean();};return e;},start:function(o){$.fck.intercept();return $.fck.create(o);}}});$.extend($.fn,{fck:function(o){$.fck.start($.extend(o||{},{e:this}));}});})(jQuery);;(function(){var $$;$$=jQuery.fn.flash=function(htmlOptions,pluginOptions,replace,update){var block=replace||$$.replace;pluginOptions=$$.copy($$.pluginOptions,pluginOptions);if(!$$.hasFlash(pluginOptions.version)){if(pluginOptions.expressInstall&&$$.hasFlash(6,0,65)){var expressInstallOptions={flashvars:{MMredirectURL:location,MMplayerType:'PlugIn',MMdoctitle:jQuery('title').text()}};}else if(pluginOptions.update){block=update||$$.update;}else{return this;}}
htmlOptions=$$.copy($$.htmlOptions,expressInstallOptions,htmlOptions);return this.each(function(){block.call(this,$$.copy(htmlOptions));});};$$.copy=function(){var options={},flashvars={};for(var i=0;i<arguments.length;i++){var arg=arguments[i];if(arg==undefined)continue;jQuery.extend(options,arg);if(arg.flashvars==undefined)continue;jQuery.extend(flashvars,arg.flashvars);}
options.flashvars=flashvars;return options;};$$.hasFlash=function(){if(/hasFlash\=true/.test(location))return true;if(/hasFlash\=false/.test(location))return false;var pv=$$.hasFlash.playerVersion().match(/\d+/g);var rv=String([arguments[0],arguments[1],arguments[2]]).match(/\d+/g)||String($$.pluginOptions.version).match(/\d+/g);for(var i=0;i<3;i++){pv[i]=parseInt(pv[i]||0);rv[i]=parseInt(rv[i]||0);if(pv[i]<rv[i])return false;if(pv[i]>rv[i])return true;}
return true;};$$.hasFlash.playerVersion=function(){try{try{var axo=new ActiveXObject('ShockwaveFlash.ShockwaveFlash.6');try{axo.AllowScriptAccess='always';}
catch(e){return'6,0,0';}}catch(e){}
return new ActiveXObject('ShockwaveFlash.ShockwaveFlash').GetVariable('$version').replace(/\D+/g,',').match(/^,?(.+),?$/)[1];}catch(e){try{if(navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin){return(navigator.plugins["Shockwave Flash 2.0"]||navigator.plugins["Shockwave Flash"]).description.replace(/\D+/g,",").match(/^,?(.+),?$/)[1];}}catch(e){}}
return'0,0,0';};$$.htmlOptions={height:240,flashvars:{},pluginspage:'http://www.adobe.com/go/getflashplayer',src:'#',type:'application/x-shockwave-flash',width:320};$$.pluginOptions={expressInstall:false,update:true,version:'6.0.65'};$$.replace=function(htmlOptions){this.innerHTML='<div class="alt">'+this.innerHTML+'</div>';jQuery(this).addClass('flash-replaced').prepend($$.transform(htmlOptions));};$$.update=function(htmlOptions){var url=String(location).split('?');url.splice(1,0,'?hasFlash=true&');url=url.join('');var msg='<p>This content requires the Flash Player. <a href="http://www.adobe.com/go/getflashplayer">Download Flash Player</a>. Already have Flash Player? <a href="'+url+'">Click here.</a></p>';this.innerHTML='<span class="alt">'+this.innerHTML+'</span>';jQuery(this).addClass('flash-update').prepend(msg);};function toAttributeString(){var s='';for(var key in this)
if(typeof this[key]!='function')
s+=key+'="'+this[key]+'" ';return s;};function toFlashvarsString(){var s='';for(var key in this)
if(typeof this[key]!='function')
s+=key+'='+encodeURIComponent(this[key])+'&';return s.replace(/&$/,'');};$$.transform=function(htmlOptions){htmlOptions.toString=toAttributeString;if(htmlOptions.flashvars)htmlOptions.flashvars.toString=toFlashvarsString;return'<embed '+String(htmlOptions)+'/>';};if(window.attachEvent){window.attachEvent("onbeforeunload",function(){__flash_unloadHandler=function(){};__flash_savedUnloadHandler=function(){};});}})();(function($){$.jGrowl=function(m,o){if($('#jGrowl').size()==0)$('<div id="jGrowl"></div>').addClass($.jGrowl.defaults.position).appendTo('body');$('#jGrowl').jGrowl(m,o);};$.fn.jGrowl=function(m,o){if($.isFunction(this.each)){var args=arguments;return this.each(function(){var self=this;if($(this).data('jGrowl.instance')==undefined){$(this).data('jGrowl.instance',new $.fn.jGrowl());$(this).data('jGrowl.instance').startup(this);}
if($.isFunction($(this).data('jGrowl.instance')[m])){$(this).data('jGrowl.instance')[m].apply($(this).data('jGrowl.instance'),$.makeArray(args).slice(1));}else{$(this).data('jGrowl.instance').notification(m,o);}});};};$.extend($.fn.jGrowl.prototype,{defaults:{header:'',sticky:false,position:'top-right',glue:'after',theme:'default',corners:'10px',check:500,life:3000,speed:'normal',easing:'swing',closer:true,log:function(e,m,o){},beforeOpen:function(e,m,o){},open:function(e,m,o){},beforeClose:function(e,m,o){},close:function(e,m,o){},animateOpen:{opacity:'show'},animateClose:{opacity:'hide'}},element:null,interval:null,notification:function(message,o){var self=this;var o=$.extend({},this.defaults,o);o.log.apply(this.element,[this.element,message,o]);var notification=$('<div class="jGrowl-notification"><div class="close">&times;</div><div class="jgrowl-header">'+o.header+'</div><div class="message">'+message+'</div></div>').data("jGrowl",o).addClass(o.theme).children('div.close').bind("click.jGrowl",function(){$(this).unbind('click.jGrowl').parent().trigger('jGrowl.beforeClose').animate(o.animateClose,o.speed,o.easing,function(){$(this).trigger('jGrowl.close').remove();});}).parent();(o.glue=='after')?$('div.jGrowl-notification:last',this.element).after(notification):$('div.jGrowl-notification:first',this.element).before(notification);$(notification).bind("mouseover.jGrowl",function(){$(this).data("jGrowl").pause=true;}).bind("mouseout.jGrowl",function(){$(this).data("jGrowl").pause=false;}).bind('jGrowl.beforeOpen',function(){o.beforeOpen.apply(self.element,[self.element,message,o]);}).bind('jGrowl.open',function(){o.open.apply(self.element,[self.element,message,o]);}).bind('jGrowl.beforeClose',function(){o.beforeClose.apply(self.element,[self.element,message,o]);}).bind('jGrowl.close',function(){o.close.apply(self.element,[self.element,message,o]);}).trigger('jGrowl.beforeOpen').animate(o.animateOpen,o.speed,o.easing,function(){$(this).data("jGrowl").created=new Date();}).trigger('jGrowl.open');if($.fn.corner!=undefined)$(notification).corner(o.corners);if($('div.jGrowl-notification:parent',this.element).size()>1&&$('div.jGrowl-closer',this.element).size()==0&&this.defaults.closer!=false){$('<div class="jGrowl-closer">[ закрыть все ]</div>').addClass(this.defaults.theme).appendTo(this.element).animate(this.defaults.animateOpen,this.defaults.speed,this.defaults.easing).bind("click.jGrowl",function(){$(this).siblings().children('div.close').trigger("click.jGrowl");if($.isFunction(self.defaults.closer))self.defaults.closer.apply($(this).parent()[0],[$(this).parent()[0]]);});};},update:function(){$(this.element).find('div.jGrowl-notification:parent').each(function(){if($(this).data("jGrowl")!=undefined&&$(this).data("jGrowl").created!=undefined&&($(this).data("jGrowl").created.getTime()+$(this).data("jGrowl").life)<(new Date()).getTime()&&$(this).data("jGrowl").sticky!=true&&($(this).data("jGrowl").pause==undefined||$(this).data("jGrowl").pause!=true)){$(this).children('div.close').trigger('click.jGrowl');}});if($(this.element).find('div.jGrowl-notification:parent').size()<2){$(this.element).find('div.jGrowl-closer').animate(this.defaults.animateClose,this.defaults.speed,this.defaults.easing,function(){$(this).remove();});};},startup:function(e){this.element=$(e).addClass('jGrowl').append('<div class="jGrowl-notification"></div>');this.interval=setInterval(function(){jQuery(e).data('jGrowl.instance').update();},this.defaults.check);if($.browser.msie&&parseInt($.browser.version)<7)$(this.element).addClass('ie6');},shutdown:function(){$(this.element).removeClass('jGrowl').find('div.jGrowl-notification').remove();clearInterval(this.interval);}});$.jGrowl.defaults=$.fn.jGrowl.prototype.defaults;})(jQuery);(function($){$.fn.lightBox=function(settings){settings=jQuery.extend({overlayBgColor:'#000',overlayOpacity:0.8,fixedNavigation:false,imageLoading:'/images/lightbox-ico-loading.gif',imageBtnPrev:'/images/lightbox-btn-prev.gif',imageBtnNext:'/images/lightbox-btn-next.gif',imageBtnClose:'/images/lightbox-btn-close.gif',imageBlank:'/images/lightbox-blank.gif',containerBorderSize:10,containerResizeSpeed:400,txtImage:'Image',txtOf:'of',keyToClose:'c',keyToPrev:'p',keyToNext:'n',imageArray:[],activeImage:0},settings);var jQueryMatchedObj=this;function _initialize(){_start(this,jQueryMatchedObj);return false;}
function _start(objClicked,jQueryMatchedObj){$('embed, object, select').css({'visibility':'hidden'});_set_interface();settings.imageArray.length=0;settings.activeImage=0;if(jQueryMatchedObj.length==1){settings.imageArray.push(new Array(objClicked.getAttribute('href'),objClicked.getAttribute('title'),objClicked.getAttribute('data-desc'),objClicked.getAttribute('data-author')));}else{for(var i=0;i<jQueryMatchedObj.length;i++){settings.imageArray.push(new Array(jQueryMatchedObj[i].getAttribute('href'),jQueryMatchedObj[i].getAttribute('title'),jQueryMatchedObj[i].getAttribute('data-desc'),jQueryMatchedObj[i].getAttribute('data-author')));}}
while(settings.imageArray[settings.activeImage][0]!=objClicked.getAttribute('href')){settings.activeImage++;}
_set_image_to_view();}
function _set_interface(){$('body').append('<div id="jquery-overlay"></div><div id="jquery-lightbox"><div id="lightbox-container-image-box"><div id="lightbox-container-image"><img id="lightbox-image"><div style="" id="lightbox-nav"><a href="#" id="lightbox-nav-btnPrev"></a><a href="#" id="lightbox-nav-btnNext"></a></div><div id="lightbox-loading"><a href="#" id="lightbox-loading-link"><img src="'+settings.imageLoading+'"></a></div></div></div><div id="lightbox-container-image-data-box"><div id="lightbox-container-image-data"><div id="lightbox-image-details"><span id="lightbox-image-details-caption"></span><span id="lightbox-image-details-desc"></span><span id="lightbox-image-details-author"></span><span id="lightbox-image-details-currentNumber"></span></div><div id="lightbox-secNav"><a href="#" id="lightbox-secNav-btnClose"><img src="'+settings.imageBtnClose+'"></a></div></div></div></div>');var arrPageSizes=___getPageSize();$('#jquery-overlay').css({backgroundColor:settings.overlayBgColor,opacity:settings.overlayOpacity,width:arrPageSizes[0],height:arrPageSizes[1]}).fadeIn();var arrPageScroll=___getPageScroll();$('#jquery-lightbox').css({top:arrPageScroll[1]+(arrPageSizes[3]/10),left:arrPageScroll[0]}).show();$('#jquery-overlay,#jquery-lightbox').click(function(){_finish();});$('#lightbox-loading-link,#lightbox-secNav-btnClose').click(function(){_finish();return false;});$(window).resize(function(){var arrPageSizes=___getPageSize();$('#jquery-overlay').css({width:arrPageSizes[0],height:arrPageSizes[1]});var arrPageScroll=___getPageScroll();$('#jquery-lightbox').css({top:arrPageScroll[1]+(arrPageSizes[3]/10),left:arrPageScroll[0]});});}
function _set_image_to_view(){$('#lightbox-loading').show();if(settings.fixedNavigation){$('#lightbox-image,#lightbox-container-image-data-box,#lightbox-image-details-currentNumber').hide();}else{$('#lightbox-image,#lightbox-nav,#lightbox-nav-btnPrev,#lightbox-nav-btnNext,#lightbox-container-image-data-box,#lightbox-image-details-currentNumber').hide();}
var objImagePreloader=new Image();objImagePreloader.onload=function(){$('#lightbox-image').attr('src',settings.imageArray[settings.activeImage][0]);_resize_container_image_box(objImagePreloader.width,objImagePreloader.height);objImagePreloader.onload=function(){};};objImagePreloader.src=settings.imageArray[settings.activeImage][0];};function _resize_container_image_box(intImageWidth,intImageHeight){var intCurrentWidth=$('#lightbox-container-image-box').width();var intCurrentHeight=$('#lightbox-container-image-box').height();var intWidth=(intImageWidth+(settings.containerBorderSize*2));var intHeight=(intImageHeight+(settings.containerBorderSize*2));var intDiffW=intCurrentWidth-intWidth;var intDiffH=intCurrentHeight-intHeight;$('#lightbox-container-image-box').animate({width:intWidth,height:intHeight},settings.containerResizeSpeed,function(){_show_image();});if((intDiffW==0)&&(intDiffH==0)){if($.browser.msie){___pause(250);}else{___pause(100);}}
$('#lightbox-container-image-data-box').css({width:intImageWidth});$('#lightbox-nav-btnPrev,#lightbox-nav-btnNext').css({height:intImageHeight+(settings.containerBorderSize*2)});};function _show_image(){$('#lightbox-loading').hide();$('#lightbox-image').fadeIn(function(){_show_image_data();_set_navigation();});_preload_neighbor_images();};function _show_image_data(){$('#lightbox-container-image-data-box').slideDown('fast');$('#lightbox-image-details-caption, #lightbox-image-details-desc, #lightbox-image-details-author').hide();if(settings.imageArray[settings.activeImage][1]){$('#lightbox-image-details-caption').html(settings.imageArray[settings.activeImage][1]).show();$('#lightbox-image-details-desc').html(settings.imageArray[settings.activeImage][2]).show();$('#lightbox-image-details-author').html(settings.imageArray[settings.activeImage][3]).show();}
if(settings.imageArray.length>1){$('#lightbox-image-details-currentNumber').html(settings.txtImage+' '+(settings.activeImage+1)+' '+settings.txtOf+' '+settings.imageArray.length).show();}}
function _set_navigation(){$('#lightbox-nav').show();$('#lightbox-nav-btnPrev,#lightbox-nav-btnNext').css({'background':'transparent url('+settings.imageBlank+') no-repeat'});if(settings.activeImage!=0){if(settings.fixedNavigation){$('#lightbox-nav-btnPrev').css({'background':'url('+settings.imageBtnPrev+') left 15% no-repeat'}).unbind().bind('click',function(){settings.activeImage=settings.activeImage-1;_set_image_to_view();_disable_keyboard_navigation();return false;});}else{$('#lightbox-nav-btnPrev').unbind().hover(function(){$(this).css({'background':'url('+settings.imageBtnPrev+') left 15% no-repeat'});},function(){$(this).css({'background':'transparent url('+settings.imageBlank+') no-repeat'});}).show().bind('click',function(){settings.activeImage=settings.activeImage-1;_set_image_to_view();_disable_keyboard_navigation();return false;});}}
if(settings.activeImage!=(settings.imageArray.length-1)){if(settings.fixedNavigation){$('#lightbox-nav-btnNext').css({'background':'url('+settings.imageBtnNext+') right 15% no-repeat'}).unbind().bind('click',function(){settings.activeImage=settings.activeImage+1;_set_image_to_view();_disable_keyboard_navigation();return false;});}else{$('#lightbox-nav-btnNext').unbind().hover(function(){$(this).css({'background':'url('+settings.imageBtnNext+') right 15% no-repeat'});},function(){$(this).css({'background':'transparent url('+settings.imageBlank+') no-repeat'});}).show().bind('click',function(){settings.activeImage=settings.activeImage+1;_set_image_to_view();_disable_keyboard_navigation();return false;});}}
_enable_keyboard_navigation();}
function _enable_keyboard_navigation(){$(document).keyup(function(objEvent){_keyboard_action(objEvent);});}
function _disable_keyboard_navigation(){$(document).unbind();}
function _keyboard_action(objEvent){if(objEvent==null){keycode=event.keyCode;escapeKey=27;}else{keycode=objEvent.keyCode;escapeKey=27;}
key=String.fromCharCode(keycode).toLowerCase();if((key==settings.keyToClose)||(key=='x')||(keycode==escapeKey)){_finish();}
if((key==settings.keyToPrev)||(keycode==37)){if(settings.activeImage!=0){settings.activeImage=settings.activeImage-1;_set_image_to_view();_disable_keyboard_navigation();}}
if((key==settings.keyToNext)||(keycode==39)){if(settings.activeImage!=(settings.imageArray.length-1)){settings.activeImage=settings.activeImage+1;_set_image_to_view();_disable_keyboard_navigation();}}}
function _preload_neighbor_images(){if((settings.imageArray.length-1)>settings.activeImage){objNext=new Image();objNext.src=settings.imageArray[settings.activeImage+1][0];}
if(settings.activeImage>0){objPrev=new Image();objPrev.src=settings.imageArray[settings.activeImage-1][0];}}
function _finish(){_disable_keyboard_navigation();$('#jquery-lightbox').remove();$('#jquery-overlay').fadeOut(function(){$('#jquery-overlay').remove();});$('embed, object, select').css({'visibility':'visible'});}
function ___getPageSize(){var xScroll,yScroll;if(window.innerHeight&&window.scrollMaxY){xScroll=window.innerWidth+window.scrollMaxX;yScroll=window.innerHeight+window.scrollMaxY;}else if(document.body.scrollHeight>document.body.offsetHeight){xScroll=document.body.scrollWidth;yScroll=document.body.scrollHeight;}else{xScroll=document.body.offsetWidth;yScroll=document.body.offsetHeight;}
var windowWidth,windowHeight;if(self.innerHeight){if(document.documentElement.clientWidth){windowWidth=document.documentElement.clientWidth;}else{windowWidth=self.innerWidth;}
windowHeight=self.innerHeight;}else if(document.documentElement&&document.documentElement.clientHeight){windowWidth=document.documentElement.clientWidth;windowHeight=document.documentElement.clientHeight;}else if(document.body){windowWidth=document.body.clientWidth;windowHeight=document.body.clientHeight;}
if(yScroll<windowHeight){pageHeight=windowHeight;}else{pageHeight=yScroll;}
if(xScroll<windowWidth){pageWidth=xScroll;}else{pageWidth=windowWidth;}
arrayPageSize=new Array(pageWidth,pageHeight,windowWidth,windowHeight);return arrayPageSize;};function ___getPageScroll(){var xScroll,yScroll;if(self.pageYOffset){yScroll=self.pageYOffset;xScroll=self.pageXOffset;}else if(document.documentElement&&document.documentElement.scrollTop){yScroll=document.documentElement.scrollTop;xScroll=document.documentElement.scrollLeft;}else if(document.body){yScroll=document.body.scrollTop;xScroll=document.body.scrollLeft;}
arrayPageScroll=new Array(xScroll,yScroll);return arrayPageScroll;};function ___pause(ms){var date=new Date();curDate=null;do{var curDate=new Date();}
while(curDate-date<ms);};return this.unbind('click').click(_initialize);};})(jQuery);(function(A){A.fn.placehold=function(D){var D=D||"placeholder",C=A.fn.placehold.is_supported();function B(){for(i=0;i<arguments.length;i++){arguments[i].toggle();}}return C?this:this.each(function(){var F=A(this),E=F.attr("placeholder");if(E){if(!F.val()||F.val()==E){F.addClass(D).val(E);}if(F.attr("type")=="password"){var G=A("<input />",{"class":F.attr("class")+" "+D,value:E});G.bind("focus.placehold",function(){B(F,G);F.focus();});F.bind("blur.placehold",function(){if(!F.val()){B(F,G);}});F.hide().after(G);}F.bind({"focus.placehold":function(){if(F.val()==E){F.removeClass(D).val("");}},"blur.placehold":function(){if(!F.val()){F.addClass(D).val(E);}}});F.closest("form").bind("submit.placehold",function(){if(F.val()==E){F.val("");}return true;});}});};A.fn.placehold.is_supported=function(){return"placeholder"in document.createElement("input");};})(jQuery);;(function($){$.fn.quicksearch=function(options){options=jQuery.extend({position:'prepend',attached:'body',formId:'quicksearch',labelText:'Быстрый поиск: &nbsp;',labelClass:'qs_label',inputText:null,inputClass:'qs_input',loaderId:'loader',loaderClass:'loader',loaderImg:null,loaderText:'Loading...',stripeRowClass:null,hideElement:null,delay:500,focusOnLoad:false,onBefore:null,onAfter:null,filter:null,randomElement:'qs'+Math.floor(Math.random()*1000000)},options);var timeout;var cache;var score={};var el=this;var stripeRowLength=(!is_empty(options.stripeRowClass))?options.stripeRowClass.length:0;var doStripe=(stripeRowLength>0)?true:false;function is_empty(i)
{return(i==null||i==undefined||i==false)?true:false;}
function get_cache(el)
{cache=$(el).not('.'+options.noResultsClass).map(function(){return strip_html(normalise(this.innerHTML));});}
function normalise(i)
{return $.trim(i.toLowerCase().replace(/\n/,'').replace(/\s{2,}/,' '));}
function get_key()
{var input=strip_html(normalise($('input[rel="'+options.randomElement+'"]').val()));if(typeof options.filter=="function"){input=options.filter(input);}
if(input.indexOf(' ')==-1)
{return input;}
else
{return input.split(" ");}}
function test_key(k,value,type)
{if(type=="string")
{return test_key_string(k,value);}
else
{return test_key_arr(k,value);}}
function test_key_string(k,value)
{return(value.indexOf(k)>-1);}
function test_key_arr(k,value)
{for(var i=0;i<k.length;i++){var test=value.indexOf(k[i]);if(test==-1){return false;}}
return true;}
function strip_html(input)
{var regexp=new RegExp(/\<[^\<]+\>/g);var output=input.replace(regexp,"");output=output.toLowerCase();return output;}
function select_element(el)
{if(options.hideElement=="grandparent")
{return $(el).parent().parent();}
else if(options.hideElement=="parent")
{return $(el).parent();}
else
{return $(el);}}
function stripe(el)
{if(doStripe)
{var i=0;select_element(el).filter(':visible').each(function(){for(var j=0;j<stripeRowLength;j++)
{if(i==j)
{$(this).addClass(options.stripeRowClass[i]);}
else
{$(this).removeClass(options.stripeRowClass[j]);}}
i=(i+1)%stripeRowLength;});}}
function loader(o){if(options.loaderId)
{var l=$('input[rel="'+options.randomElement+'"]').parent().find('.loader');if(o=='hide')
{l.hide();}
else
{l.show();}}}
function place_form(){var formPosition=options.position;var formAttached=options.attached;if(formPosition=='before'){$(formAttached).before(make_form());}else if(formPosition=='prepend'){$(formAttached).prepend(make_form());}else if(formPosition=='append'){$(formAttached).append(make_form());}else{$(formAttached).after(make_form());}}
function make_form()
{return'<form action="#" '+'id="'+options.formId+'" '+'class="quicksearch"><br />'+
make_form_label()+make_form_input()+make_form_loader()+'</form>';}
function make_form_label()
{if(!is_empty(options.labelText)){return'<label for="'+options.randomElement+'" '+'class="'+options.labelClass+'">'
+options.labelText
+'</label> ';}
return'';}
function make_form_input()
{var val=(!is_empty(options.inputText))?options.inputText:""
return'<input type="text" value="'+val+'" rel="'+options.randomElement+'" class="'+options.inputClass+'" id="'+options.randomElement+'" /> ';}
function make_form_loader()
{if(!is_empty(options.loaderImg)){return'<img src="'+options.loaderImg+'" alt="Loading" id="'+options.loaderId+'" class="'+options.loaderClass+'" />';}else{return'<span id="'+options.loaderId+'" class="'+options.loaderClass+'">'+options.loaderText+'</span>';}}
function focus_on_load()
{$('input[rel="'+options.randomElement+'"]').get(0).focus();}
function toggle_text(){$('input[rel="'+options.randomElement+'"]').focus(function(){if($(this).val()==options.inputText){$(this).val('');}}),$('input[rel="'+options.randomElement+'"]').blur(function(){if($(this).val()==""){$(this).val(options.inputText);}})};function init()
{place_form();if(options.focusOnLoad){focus_on_load();}
if(options.inputText!=""&&options.inputText!=null){toggle_text();}
get_cache(el);stripe(el);loader('hide');}
function qs()
{clearTimeout(timeout);timeout=setTimeout(function(){if(typeof options.onBefore=="function"){options.onBefore();}
loader('show');setTimeout(function(){var k=get_key();var k_type=(typeof k);var i=0;if(k!="")
{if(typeof score[k]=="undefined")
{score[k]=new Array();cache.each(function(i){if(test_key(k,cache[i],k_type))
{score[k][i]=true;}});}
if(score[k].length==0)
{select_element(el).hide();}
else
{$(el).not('.'+options.noResultsClass).each(function(i){if(score[k][i])
{select_element(this).show();}
else
{select_element(this).hide();}});}}
else
{select_element(el).show();}
stripe(el);},options.delay/2);setTimeout(function(){loader('hide');if(typeof options.onAfter=="function"){options.onAfter();}},options.delay/2);},options.delay/2);}
init();$('input[rel="'+options.randomElement+'"]').keydown(function(e){var keycode=e.keyCode;if(!(keycode==9||keycode==13||keycode==16||keycode==17||keycode==18||keycode==38||keycode==40||keycode==224))
{qs();}});$('form.quicksearch').submit(function(){return false;});return this;}})(jQuery);;(function(d){var k=d.scrollTo=function(a,i,e){d(window).scrollTo(a,i,e)};k.defaults={axis:'xy',duration:parseFloat(d.fn.jquery)>=1.3?0:1};k.window=function(a){return d(window)._scrollable()};d.fn._scrollable=function(){return this.map(function(){var a=this,i=!a.nodeName||d.inArray(a.nodeName.toLowerCase(),['iframe','#document','html','body'])!=-1;if(!i)return a;var e=(a.contentWindow||a).document||a.ownerDocument||a;return d.browser.safari||e.compatMode=='BackCompat'?e.body:e.documentElement})};d.fn.scrollTo=function(n,j,b){if(typeof j=='object'){b=j;j=0}if(typeof b=='function')b={onAfter:b};if(n=='max')n=9e9;b=d.extend({},k.defaults,b);j=j||b.speed||b.duration;b.queue=b.queue&&b.axis.length>1;if(b.queue)j/=2;b.offset=p(b.offset);b.over=p(b.over);return this._scrollable().each(function(){var q=this,r=d(q),f=n,s,g={},u=r.is('html,body');switch(typeof f){case'number':case'string':if(/^([+-]=)?\d+(\.\d+)?(px|%)?$/.test(f)){f=p(f);break}f=d(f,this);case'object':if(f.is||f.style)s=(f=d(f)).offset()}d.each(b.axis.split(''),function(a,i){var e=i=='x'?'Left':'Top',h=e.toLowerCase(),c='scroll'+e,l=q[c],m=k.max(q,i);if(s){g[c]=s[h]+(u?0:l-r.offset()[h]);if(b.margin){g[c]-=parseInt(f.css('margin'+e))||0;g[c]-=parseInt(f.css('border'+e+'Width'))||0}g[c]+=b.offset[h]||0;if(b.over[h])g[c]+=f[i=='x'?'width':'height']()*b.over[h]}else{var o=f[h];g[c]=o.slice&&o.slice(-1)=='%'?parseFloat(o)/100*m:o}if(/^\d+$/.test(g[c]))g[c]=g[c]<=0?0:Math.min(g[c],m);if(!a&&b.queue){if(l!=g[c])t(b.onAfterFirst);delete g[c]}});t(b.onAfter);function t(a){r.animate(g,j,b.easing,a&&function(){a.call(this,n,b)})}}).end()};k.max=function(a,i){var e=i=='x'?'Width':'Height',h='scroll'+e;if(!d(a).is('html,body'))return a[h]-d(a)[e.toLowerCase()]();var c='client'+e,l=a.ownerDocument.documentElement,m=a.ownerDocument.body;return Math.max(l[h],m[h])-Math.min(l[c],m[c])};function p(a){return typeof a=='object'?a:{top:a,left:a}}})(jQuery);;(function(a){var b=a.serialScroll=function(c){return a(window).serialScroll(c)};b.defaults={duration:1e3,axis:"x",event:"click",start:0,step:1,lock:!0,cycle:!0,constant:!0};a.fn.serialScroll=function(c){return this.each(function(){var t=a.extend({},b.defaults,c),s=t.event,i=t.step,r=t.lazy,e=t.target?this:document,u=a(t.target||this,e),p=u[0],m=t.items,h=t.start,g=t.interval,k=t.navigation,l;if(!r){m=d()}if(t.force){f({},h)}a(t.prev||[],e).bind(s,-i,q);a(t.next||[],e).bind(s,i,q);if(!p.ssbound){u.bind("prev.serialScroll",-i,q).bind("next.serialScroll",i,q).bind("goto.serialScroll",f)}if(g){u.bind("start.serialScroll",function(v){if(!g){o();g=!0;n()}}).bind("stop.serialScroll",function(){o();g=!1})}u.bind("notify.serialScroll",function(x,w){var v=j(w);if(v>-1){h=v}});p.ssbound=!0;if(t.jump){(r?u:d()).bind(s,function(v){f(v,j(v.target))})}if(k){k=a(k,e).bind(s,function(v){v.data=Math.round(d().length/k.length)*k.index(this);f(v,this)})}function q(v){v.data+=h;f(v,this)}function f(B,z){if(!isNaN(z)){B.data=z;z=p}var C=B.data,v,D=B.type,A=t.exclude?d().slice(0,-t.exclude):d(),y=A.length,w=A[C],x=t.duration;if(D){B.preventDefault()}if(g){o();l=setTimeout(n,t.interval)}if(!w){v=C<0?0:y-1;if(h!=v){C=v}else{if(!t.cycle){return}else{C=y-v-1}}w=A[C]}if(!w||t.lock&&u.is(":animated")||D&&t.onBefore&&t.onBefore(B,w,u,d(),C)===!1){return}if(t.stop){u.queue("fx",[]).stop()}if(t.constant){x=Math.abs(x/i*(h-C))}u.scrollTo(w,x,t).trigger("notify.serialScroll",[C])}function n(){u.trigger("next.serialScroll")}function o(){clearTimeout(l)}function d(){return a(m,p)}function j(w){if(!isNaN(w)){return w}var x=d(),v;while((v=x.index(w))==-1&&w!=p){w=w.parentNode}return v}})}})(jQuery);(function($){$.fn.jCal=function(opt){$.jCal(this,opt);}
$.jCal=function(target,opt){opt=$.extend({day:new Date(),days:1,showMonths:1,sDate:new Date(),eDate:new Date(),dCheck:function(day){return true;},callback:function(day,days){return true;},selectedBG:'',defaultBG:'',_target:target},opt);opt.day.setDate(1);$(target).stop().empty();for(var sm=0;sm<opt.showMonths;sm++)
$(target).append('<div class="jCalMo"></div>');opt.cID='c'+$('.jCalMo').length;$(target).find('.jCalMo').each(function(ind){drawCal($(this),$.extend({},opt,{'ind':ind,'day':new Date(new Date(opt.day.getTime()).setMonth(new Date(opt.day.getTime()).getMonth()+ind))}));});}
function drawCal(target,opt){for(var ds in opt.dow)
$(target).append('<div class="dow">'+opt.dow[ds]+'</div>');var fd=new Date(new Date(opt.day.getTime()).setDate(1));var ldlm=new Date(new Date(fd.getTime()).setDate(0));var ld=new Date(new Date(new Date(fd.getTime()).setMonth(fd.getMonth()+1)).setDate(0));fdd=_getDay(fd.getDay());for(var d=1;d<(fdd+ld.getDate()+(7-_getDay(ld.getDay())));d++)
$(target).append(((d<=fdd)?'<div id="'+opt.cID+'d_'+(ld.getMonth())+'_'+(ldlm.getDate()-(fdd-d))+'_'+ld.getFullYear()+'" class="pday">'+(ldlm.getDate()-(fdd-d))+'</div>':((d>(fdd+ld.getDate()))?'<div id="'+opt.cID+'d'+d+'" class="aday">'+(d-(fdd+ld.getDate()))+'</div>':'<div id="'+opt.cID+'d_'+(fd.getMonth()+1)+'_'+(d-fdd)+'_'+fd.getFullYear()+'" class="'+
((opt.dCheck(new Date((new Date(fd.getTime())).setDate(d-fdd))))?'day':'invday')+'">'+(d-fdd)+'</div>')));$(target).find('div[id^='+opt.cID+'d]:first, div[id^='+opt.cID+'d]:nth-child(7n+1)').before('<br style="clear:both; font-size:0.1em;" />');$(target).prepend('<div class="jCal '+((opt.ind==0)?'al_center"':((opt.ind==(opt.showMonths-1))?'al_right"':''))+'">'+
((opt.ind==0)?'<span class="left">&#160;</span>':'')+'<span class="month">'+opt.ml[opt.day.getMonth()]+' '+opt.day.getFullYear()+'</span>'+
((opt.ind==(opt.showMonths-1))?'<span class="right">&#160;</span>':'')+'</div>');$(target).find('.jCal .left').bind("click",function(e){opt.day.setMonth(opt.day.getMonth()-1);$.jCal($(target).parent(),opt);});$(target).find('.jCal .right').bind("click",function(e){opt.day.setMonth(opt.day.getMonth()+((opt.showMonths==1)?1:0));$.jCal($(target).parent(),opt);});$(target).find('div[id^='+opt.cID+'d_]').bind("mouseover mouseout click",function(e){var osDate=new Date($(this).attr('id').replace(/c[0-9]{1,}d_([0-9]{1,2})_([0-9]{1,2})_([0-9]{4})/,'$1/$2/$3'));var sDate=new Date(osDate.getTime());if(e.type=='click')
$('div[id^='+opt.cID+'d_].selectedDay',$(opt._target).parent()).removeClass('selectedDay').animate({background:opt.defaultBG},'fast',function(){$(this).css('background','');});for(var di=0;di<opt.days;di++){var currDay=$(opt._target).find('#'+opt.cID+'d_'+(sDate.getMonth()+1)+'_'+sDate.getDate()+'_'+sDate.getFullYear());if(currDay==null||$(currDay).hasClass('invday'))break;$(currDay).toggleClass(((e.type=='click')?'selectedDay':'overDay'));if(e.type=='click')$(currDay).stop().animate({background:opt.selectedBG},'fast',function(){$(this).css('background',opt.selectedBG);});else $(currDay).css('background','').stop();sDate.setDate(sDate.getDate()+1);}
if(e.type=='click')opt.callback(osDate,di);});}})(jQuery);function _getDay(day)
{if(day>0)return day-1;if(!day)return 6;}
(function($){var DatePicker=function(){var ids={},views={years:'datepickerViewYears',moths:'datepickerViewMonths',days:'datepickerViewDays'},tpl={wrapper:'<div class="datepicker"><div class="datepickerBorderT" /><div class="datepickerBorderB" /><div class="datepickerBorderL" /><div class="datepickerBorderR" /><div class="datepickerBorderTL" /><div class="datepickerBorderTR" /><div class="datepickerBorderBL" /><div class="datepickerBorderBR" /><div class="datepickerContainer"><table><tbody><tr></tr></tbody></table></div></div>',head:['<td>','<table>','<thead>','<tr>','<th class="datepickerGoPrev"><a href="#"><span><%=prev%></span></a></th>','<th colspan="5" class="datepickerMonth"><a href="#"><span></span></a></th>','<th class="datepickerGoNext"><a href="#"><span><%=next%></span></a></th>','</tr>','<tr class="datepickerDoW">','<th><span><%=day1%></span></th>','<th><span><%=day2%></span></th>','<th><span><%=day3%></span></th>','<th><span><%=day4%></span></th>','<th><span><%=day5%></span></th>','<th><span><%=day6%></span></th>','<th><span><%=day7%></span></th>','</tr>','</thead>','</table></td>'],space:'<td class="datepickerSpace"><div></div></td>',days:['<tbody class="datepickerDays">','<tr>','<td class="<%=weeks[0].days[0].classname%>"><a href="#"><span><%=weeks[0].days[0].text%></span></a></td>','<td class="<%=weeks[0].days[1].classname%>"><a href="#"><span><%=weeks[0].days[1].text%></span></a></td>','<td class="<%=weeks[0].days[2].classname%>"><a href="#"><span><%=weeks[0].days[2].text%></span></a></td>','<td class="<%=weeks[0].days[3].classname%>"><a href="#"><span><%=weeks[0].days[3].text%></span></a></td>','<td class="<%=weeks[0].days[4].classname%>"><a href="#"><span><%=weeks[0].days[4].text%></span></a></td>','<td class="<%=weeks[0].days[5].classname%>"><a href="#"><span><%=weeks[0].days[5].text%></span></a></td>','<td class="<%=weeks[0].days[6].classname%>"><a href="#"><span><%=weeks[0].days[6].text%></span></a></td>','</tr>','<tr>','<td class="<%=weeks[1].days[0].classname%>"><a href="#"><span><%=weeks[1].days[0].text%></span></a></td>','<td class="<%=weeks[1].days[1].classname%>"><a href="#"><span><%=weeks[1].days[1].text%></span></a></td>','<td class="<%=weeks[1].days[2].classname%>"><a href="#"><span><%=weeks[1].days[2].text%></span></a></td>','<td class="<%=weeks[1].days[3].classname%>"><a href="#"><span><%=weeks[1].days[3].text%></span></a></td>','<td class="<%=weeks[1].days[4].classname%>"><a href="#"><span><%=weeks[1].days[4].text%></span></a></td>','<td class="<%=weeks[1].days[5].classname%>"><a href="#"><span><%=weeks[1].days[5].text%></span></a></td>','<td class="<%=weeks[1].days[6].classname%>"><a href="#"><span><%=weeks[1].days[6].text%></span></a></td>','</tr>','<tr>','<td class="<%=weeks[2].days[0].classname%>"><a href="#"><span><%=weeks[2].days[0].text%></span></a></td>','<td class="<%=weeks[2].days[1].classname%>"><a href="#"><span><%=weeks[2].days[1].text%></span></a></td>','<td class="<%=weeks[2].days[2].classname%>"><a href="#"><span><%=weeks[2].days[2].text%></span></a></td>','<td class="<%=weeks[2].days[3].classname%>"><a href="#"><span><%=weeks[2].days[3].text%></span></a></td>','<td class="<%=weeks[2].days[4].classname%>"><a href="#"><span><%=weeks[2].days[4].text%></span></a></td>','<td class="<%=weeks[2].days[5].classname%>"><a href="#"><span><%=weeks[2].days[5].text%></span></a></td>','<td class="<%=weeks[2].days[6].classname%>"><a href="#"><span><%=weeks[2].days[6].text%></span></a></td>','</tr>','<tr>','<td class="<%=weeks[3].days[0].classname%>"><a href="#"><span><%=weeks[3].days[0].text%></span></a></td>','<td class="<%=weeks[3].days[1].classname%>"><a href="#"><span><%=weeks[3].days[1].text%></span></a></td>','<td class="<%=weeks[3].days[2].classname%>"><a href="#"><span><%=weeks[3].days[2].text%></span></a></td>','<td class="<%=weeks[3].days[3].classname%>"><a href="#"><span><%=weeks[3].days[3].text%></span></a></td>','<td class="<%=weeks[3].days[4].classname%>"><a href="#"><span><%=weeks[3].days[4].text%></span></a></td>','<td class="<%=weeks[3].days[5].classname%>"><a href="#"><span><%=weeks[3].days[5].text%></span></a></td>','<td class="<%=weeks[3].days[6].classname%>"><a href="#"><span><%=weeks[3].days[6].text%></span></a></td>','</tr>','<tr>','<td class="<%=weeks[4].days[0].classname%>"><a href="#"><span><%=weeks[4].days[0].text%></span></a></td>','<td class="<%=weeks[4].days[1].classname%>"><a href="#"><span><%=weeks[4].days[1].text%></span></a></td>','<td class="<%=weeks[4].days[2].classname%>"><a href="#"><span><%=weeks[4].days[2].text%></span></a></td>','<td class="<%=weeks[4].days[3].classname%>"><a href="#"><span><%=weeks[4].days[3].text%></span></a></td>','<td class="<%=weeks[4].days[4].classname%>"><a href="#"><span><%=weeks[4].days[4].text%></span></a></td>','<td class="<%=weeks[4].days[5].classname%>"><a href="#"><span><%=weeks[4].days[5].text%></span></a></td>','<td class="<%=weeks[4].days[6].classname%>"><a href="#"><span><%=weeks[4].days[6].text%></span></a></td>','</tr>','<tr>','<td class="<%=weeks[5].days[0].classname%>"><a href="#"><span><%=weeks[5].days[0].text%></span></a></td>','<td class="<%=weeks[5].days[1].classname%>"><a href="#"><span><%=weeks[5].days[1].text%></span></a></td>','<td class="<%=weeks[5].days[2].classname%>"><a href="#"><span><%=weeks[5].days[2].text%></span></a></td>','<td class="<%=weeks[5].days[3].classname%>"><a href="#"><span><%=weeks[5].days[3].text%></span></a></td>','<td class="<%=weeks[5].days[4].classname%>"><a href="#"><span><%=weeks[5].days[4].text%></span></a></td>','<td class="<%=weeks[5].days[5].classname%>"><a href="#"><span><%=weeks[5].days[5].text%></span></a></td>','<td class="<%=weeks[5].days[6].classname%>"><a href="#"><span><%=weeks[5].days[6].text%></span></a></td>','</tr>','</tbody>'],months:['<tbody class="<%=className%>">','<tr>','<td colspan="2"><a href="#"><span><%=data[0]%></span></a></td>','<td colspan="2"><a href="#"><span><%=data[1]%></span></a></td>','<td colspan="2"><a href="#"><span><%=data[2]%></span></a></td>','<td colspan="2"><a href="#"><span><%=data[3]%></span></a></td>','</tr>','<tr>','<td colspan="2"><a href="#"><span><%=data[4]%></span></a></td>','<td colspan="2"><a href="#"><span><%=data[5]%></span></a></td>','<td colspan="2"><a href="#"><span><%=data[6]%></span></a></td>','<td colspan="2"><a href="#"><span><%=data[7]%></span></a></td>','</tr>','<tr>','<td colspan="2"><a href="#"><span><%=data[8]%></span></a></td>','<td colspan="2"><a href="#"><span><%=data[9]%></span></a></td>','<td colspan="2"><a href="#"><span><%=data[10]%></span></a></td>','<td colspan="2"><a href="#"><span><%=data[11]%></span></a></td>','</tr>','</tbody>']},defaults={flat:false,starts:1,prev:'&#171;',next:'&#187;',lastSel:false,mode:'single',view:'days',calendars:1,format:'Y-m-d',position:'bottom',eventName:'click',onRender:function(){return{};},onChange:function(){return true;},onShow:function(){return true;},onBeforeShow:function(){return true;},onHide:function(){return true;},locale:{'en':{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekMin:'wk'},'ru':{days:["Воскресенье","Понедельник","Вторник","Среда","Четверг","Пятница","Суббота","Воскресенье"],daysShort:["Вос","Пон","Вто","Сре","Чет","Пят","Суб","Вос"],daysMin:["Вс","Пн","Вт","Ср","Чт","Пт","Сб","Вс"],months:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],monthsShort:["Янв","Фев","Мар","Апр","Май","Июн","Июл","Авг","Сен","Окт","Ноя","Дек"],weekMin:'нд'},'uk':{days:["Неділя","Понеділок","Вівторок","Середа","Четвер","П'ятниця","Субота","Неділя"],daysShort:["Нед","Пон","Вів","Сер","Чет","П'ят","Суб","Нед"],daysMin:["Нд","Пн","Вт","Ср","Чт","Пт","Сб","Нд"],months:["Січень","Лютий","Березень","Квітень","Травень","Червень","Липень","Серпень","Вересень","Жовтень","Листопад","Грудень"],monthsShort:["Січ","Лют","Бер","Кві","Тра","Чер","Лип","Сер","Вер","Жов","Лис","Гру"],weekMin:'тж'}},localeKey:'en',containerId:'datepicker-inline',containerWrapper:'<div class="datepicker"><div class="datepickerBorderT" /><div class="datepickerBorderB" /><div class="datepickerBorderL" /><div class="datepickerBorderR" /><div class="datepickerBorderTL" /><div class="datepickerBorderTR" /><div class="datepickerBorderBL" /><div class="datepickerBorderBR" /><div class="datepickerContainer"><table cellspacing="0" cellpadding="0"><tbody><tr></tr></tbody></table></div></div>'},fill=function(el){var options=$(el).data('datepicker');var cal=$(el);var currentCal=Math.floor(options.calendars/2),date,data,dow,month,cnt=0,week,days,indic,indic2,html,tblCal;cal.find('td>table tbody').remove();for(var i=0;i<options.calendars;i++){date=new Date(options.current);date.addMonths(-currentCal+i);tblCal=cal.find('table').eq(i+1);switch(tblCal[0].className){case'datepickerViewDays':dow=formatDate(date,'B, Y');break;case'datepickerViewMonths':dow=date.getFullYear();break;case'datepickerViewYears':dow=(date.getFullYear()-6)+' - '+(date.getFullYear()+5);break;}
tblCal.find('thead tr:first th:eq(1) span').text(dow);dow=date.getFullYear()-6;data={data:[],className:'datepickerYears'}
for(var j=0;j<12;j++){data.data.push(dow+j);}
html=tmpl(tpl.months.join(''),data);date.setDate(1);data={weeks:[],test:10};month=date.getMonth();var dow=(date.getDay()-options.starts)%7;date.addDays(-(dow+(dow<0?7:0)));week=-1;cnt=0;while(cnt<42){indic=parseInt(cnt/7,10);indic2=cnt%7;if(!data.weeks[indic]){week=date.getWeekNumber();data.weeks[indic]={week:week,days:[]};}
data.weeks[indic].days[indic2]={text:date.getDate(),classname:[]};if(month!=date.getMonth()){data.weeks[indic].days[indic2].classname.push('datepickerNotInMonth');}
if(date.getDay()==0){data.weeks[indic].days[indic2].classname.push('datepickerSunday');}
if(date.getDay()==6){data.weeks[indic].days[indic2].classname.push('datepickerSaturday');}
var fromUser=options.onRender(date);var val=date.valueOf();if(fromUser.selected||options.date==val||$.inArray(val,options.date)>-1||(options.mode=='range'&&val>=options.date[0]&&val<=options.date[1])){data.weeks[indic].days[indic2].classname.push('datepickerSelected'); var end = 1}
if(fromUser.disabled){data.weeks[indic].days[indic2].classname.push('datepickerDisabled');}
if(end == 1 || options.date<val){data.weeks[indic].days[indic2].classname.push('datepickerDisabled');}
if(fromUser.className){data.weeks[indic].days[indic2].classname.push(fromUser.className);}
data.weeks[indic].days[indic2].classname=data.weeks[indic].days[indic2].classname.join(' ');cnt++;date.addDays(1);}
html=tmpl(tpl.days.join(''),data)+html;data={data:options.locale[options.localeKey].monthsShort,className:'datepickerMonths'};html=tmpl(tpl.months.join(''),data)+html;tblCal.append(html);}},parseDate=function(date,format){if(date.constructor==Date){return new Date(date);}
var parts=date.split(/\W+/);var against=format.split(/\W+/),d,m,y,h,min,now=new Date();for(var i=0;i<parts.length;i++){switch(against[i]){case'd':case'e':d=parseInt(parts[i],10);break;case'm':m=parseInt(parts[i],10)-1;break;case'Y':case'y':y=parseInt(parts[i],10);y+=y>100?0:(y<29?2000:1900);break;case'H':case'I':case'k':case'l':h=parseInt(parts[i],10);break;case'P':case'p':if(/pm/i.test(parts[i])&&h<12){h+=12;}else if(/am/i.test(parts[i])&&h>=12){h-=12;}
break;case'M':min=parseInt(parts[i],10);break;}}
return new Date(y===undefined?now.getFullYear():y,m===undefined?now.getMonth():m,d===undefined?now.getDate():d,h===undefined?now.getHours():h,min===undefined?now.getMinutes():min,0);},formatDate=function(date,format){var m=date.getMonth();var d=date.getDate();var y=date.getFullYear();var wn=date.getWeekNumber();var w=date.getDay();var s={};var hr=date.getHours();var pm=(hr>=12);var ir=(pm)?(hr-12):hr;var dy=date.getDayOfYear();if(ir==0){ir=12;}
var min=date.getMinutes();var sec=date.getSeconds();var parts=format.split(''),part;for(var i=0;i<parts.length;i++){part=parts[i];switch(parts[i]){case'a':part=date.getDayName();break;case'A':part=date.getDayName(true);break;case'b':part=date.getMonthName();break;case'B':part=date.getMonthName(true);break;case'C':part=1+Math.floor(y/100);break;case'd':part=(d<10)?("0"+d):d;break;case'e':part=d;break;case'H':part=(hr<10)?("0"+hr):hr;break;case'I':part=(ir<10)?("0"+ir):ir;break;case'j':part=(dy<100)?((dy<10)?("00"+dy):("0"+dy)):dy;break;case'k':part=hr;break;case'l':part=ir;break;case'm':part=(m<9)?("0"+(1+m)):(1+m);break;case'M':part=(min<10)?("0"+min):min;break;case'p':case'P':part=pm?"PM":"AM";break;case's':part=Math.floor(date.getTime()/1000);break;case'S':part=(sec<10)?("0"+sec):sec;break;case'u':part=w+1;break;case'w':part=w;break;case'y':part=(''+y).substr(2,2);break;case'Y':part=y;break;}
parts[i]=part;}
return parts.join('');},extendDate=function(options){if(Date.prototype.tempDate){return;}
Date.prototype.tempDate=null;Date.prototype.months=options.months;Date.prototype.monthsShort=options.monthsShort;Date.prototype.days=options.days;Date.prototype.daysShort=options.daysShort;Date.prototype.getMonthName=function(fullName){return this[fullName?'months':'monthsShort'][this.getMonth()];};Date.prototype.getDayName=function(fullName){return this[fullName?'days':'daysShort'][this.getDay()];};Date.prototype.addDays=function(n){this.setDate(this.getDate()+n);this.tempDate=this.getDate();};Date.prototype.addMonths=function(n){if(this.tempDate==null){this.tempDate=this.getDate();}
this.setDate(1);this.setMonth(this.getMonth()+n);this.setDate(Math.min(this.tempDate,this.getMaxDays()));};Date.prototype.addYears=function(n){if(this.tempDate==null){this.tempDate=this.getDate();}
this.setDate(1);this.setFullYear(this.getFullYear()+n);this.setDate(Math.min(this.tempDate,this.getMaxDays()));};Date.prototype.getMaxDays=function(){var tmpDate=new Date(Date.parse(this)),d=28,m;m=tmpDate.getMonth();d=28;while(tmpDate.getMonth()==m){d++;tmpDate.setDate(d);}
return d-1;};Date.prototype.getFirstDay=function(){var tmpDate=new Date(Date.parse(this));tmpDate.setDate(1);return tmpDate.getDay();};Date.prototype.getWeekNumber=function(){var tempDate=new Date(this);tempDate.setDate(tempDate.getDate()-(tempDate.getDay()+6)%7+3);var dms=tempDate.valueOf();tempDate.setMonth(0);tempDate.setDate(4);return Math.round((dms-tempDate.valueOf())/(604800000))+1;};Date.prototype.getDayOfYear=function(){var now=new Date(this.getFullYear(),this.getMonth(),this.getDate(),0,0,0);var then=new Date(this.getFullYear(),0,0,0,0,0);var time=now-then;return Math.floor(time/24*60*60*1000);};},layout=function(el){var options=$(el).data('datepicker');var cal=$('#'+options.id);if(!options.extraHeight){var divs=$(el).find('div');options.extraHeight=divs.get(0).offsetHeight+divs.get(1).offsetHeight;options.extraWidth=divs.get(2).offsetWidth+divs.get(3).offsetWidth;}
var tbl=cal.find('table:first').get(0);var width=tbl.offsetWidth;var height=tbl.offsetHeight;cal.css({width:width+options.extraWidth+'px',height:height+options.extraHeight+'px'}).find('div.datepickerContainer').css({width:width+'px',height:height+'px'});},click=function(ev){if($(ev.target).is('span')){ev.target=ev.target.parentNode;}
var el=$(ev.target);if(el.is('a')){ev.target.blur();if(el.hasClass('datepickerDisabled')){return false;}
var options=$(this).data('datepicker');var parentEl=el.parent();var tblEl=parentEl.parent().parent().parent();var tblIndex=$('table',this).index(tblEl.get(0))-1;var tmp=new Date(options.current);var changed=false;var fillIt=false;if(parentEl.is('th')){if(parentEl.hasClass('datepickerWeek')&&options.mode=='range'&&!parentEl.next().hasClass('datepickerDisabled')){var val=parseInt(parentEl.next().text(),10);tmp.addMonths(tblIndex-Math.floor(options.calendars/2));if(parentEl.next().hasClass('datepickerNotInMonth')){tmp.addMonths(val>15?-1:1);}
tmp.setDate(val);options.date[0]=(tmp.setHours(0,0,0,0)).valueOf();tmp.setHours(23,59,59,0);tmp.addDays(6);options.date[1]=tmp.valueOf();fillIt=true;changed=true;options.lastSel=false;}else if(parentEl.hasClass('datepickerMonth')){tmp.addMonths(tblIndex-Math.floor(options.calendars/2));switch(tblEl.get(0).className){case'datepickerViewDays':tblEl.get(0).className='datepickerViewMonths';el.find('span').text(tmp.getFullYear());break;case'datepickerViewMonths':tblEl.get(0).className='datepickerViewYears';el.find('span').text((tmp.getFullYear()-6)+' - '+(tmp.getFullYear()+5));break;case'datepickerViewYears':tblEl.get(0).className='datepickerViewDays';el.find('span').text(formatDate(tmp,'B, Y'));break;}}else if(parentEl.parent().parent().is('thead')){switch(tblEl.get(0).className){case'datepickerViewDays':options.current.addMonths(parentEl.hasClass('datepickerGoPrev')?-1:1);break;case'datepickerViewMonths':options.current.addYears(parentEl.hasClass('datepickerGoPrev')?-1:1);break;case'datepickerViewYears':options.current.addYears(parentEl.hasClass('datepickerGoPrev')?-12:12);break;}
fillIt=true;}}else if(parentEl.is('td')&&!parentEl.hasClass('datepickerDisabled')){switch(tblEl.get(0).className){case'datepickerViewMonths':options.current.setMonth(tblEl.find('tbody.datepickerMonths td').index(parentEl));options.current.setFullYear(parseInt(tblEl.find('thead th.datepickerMonth span').text(),10));options.current.addMonths(Math.floor(options.calendars/2)-tblIndex);tblEl.get(0).className='datepickerViewDays';break;case'datepickerViewYears':options.current.setFullYear(parseInt(el.text(),10));tblEl.get(0).className='datepickerViewMonths';break;default:var val=parseInt(el.text(),10);tmp.addMonths(tblIndex-Math.floor(options.calendars/2));if(parentEl.hasClass('datepickerNotInMonth')){tmp.addMonths(val>15?-1:1);}
tmp.setDate(val);switch(options.mode){case'multiple':val=(tmp.setHours(0,0,0,0)).valueOf();if($.inArray(val,options.date)>-1){$.each(options.date,function(nr,dat){if(dat==val){options.date.splice(nr,1);return false;}});}else{options.date.push(val);}
break;case'range':if(!options.lastSel){options.date[0]=(tmp.setHours(0,0,0,0)).valueOf();}
val=(tmp.setHours(23,59,59,0)).valueOf();if(val<options.date[0]){options.date[1]=options.date[0]+86399000;options.date[0]=val-86399000;}else{options.date[1]=val;}
options.lastSel=!options.lastSel;break;default:options.date=tmp.valueOf();break;}
break;}
fillIt=true;changed=true;}
if(fillIt){fill(this);}
if(changed){options.onChange.apply(this,prepareDate(options));}}
return false;},prepareDate=function(options){var tmp;if(options.mode=='single'){tmp=new Date(options.date);return[formatDate(tmp,options.format),tmp,options.el];}else{tmp=[[],[],options.el];$.each(options.date,function(nr,val){var date=new Date(val);tmp[0].push(formatDate(date,options.format));tmp[1].push(date);});return tmp;}},getViewport=function(){var m=document.compatMode=='CSS1Compat';return{l:window.pageXOffset||(m?document.documentElement.scrollLeft:document.body.scrollLeft),t:window.pageYOffset||(m?document.documentElement.scrollTop:document.body.scrollTop),w:window.innerWidth||(m?document.documentElement.clientWidth:document.body.clientWidth),h:window.innerHeight||(m?document.documentElement.clientHeight:document.body.clientHeight)};},isChildOf=function(parentEl,el,container){if(parentEl==el){return true;}
if(parentEl.contains){return parentEl.contains(el);}
if(parentEl.compareDocumentPosition){return!!(parentEl.compareDocumentPosition(el)&16);}
var prEl=el.parentNode;while(prEl&&prEl!=container){if(prEl==parentEl)
return true;prEl=prEl.parentNode;}
return false;},show=function(ev){var cal=$('#'+$(this).data('datepickerId'));if(!cal.is(':visible')){var calEl=cal.get(0);fill(calEl);var options=cal.data('datepicker');options.onBeforeShow.apply(this,[cal.get(0)]);var pos=$(this).offset();var viewPort=getViewport();var top=pos.top;var left=pos.left;var oldDisplay=$.curCSS(calEl,'display');cal.css({visibility:'hidden',display:'block'});layout(calEl);switch(options.position){case'top':top-=calEl.offsetHeight;break;case'left':left-=calEl.offsetWidth;break;case'right':left+=this.offsetWidth;break;case'bottom':top+=this.offsetHeight;break;}
if(top+calEl.offsetHeight>viewPort.t+viewPort.h){top=pos.top-calEl.offsetHeight;}
if(top<viewPort.t){top=pos.top+this.offsetHeight+calEl.offsetHeight;}
if(left+calEl.offsetWidth>viewPort.l+viewPort.w){left=pos.left-calEl.offsetWidth;}
if(left<viewPort.l){left=pos.left+this.offsetWidth}
cal.css({visibility:'visible',display:'block',top:top+'px',left:left+'px'});if(options.onShow.apply(this,[cal.get(0)])!=false){cal.show();}
$(document).bind('mousedown',{cal:cal,trigger:this},hide);}
return false;},hide=function(ev){if(ev.target!=ev.data.trigger&&!isChildOf(ev.data.cal.get(0),ev.target,ev.data.cal.get(0))){if(ev.data.cal.data('datepicker').onHide.apply(this,[ev.data.cal.get(0)])!=false){ev.data.cal.hide();}
$(document).unbind('mousedown',hide);}};return{init:function(options){options=$.extend({},defaults,options||{});extendDate(options.locale[options.localeKey]);options.calendars=Math.max(1,parseInt(options.calendars,10)||1);options.mode=/single|multiple|range/.test(options.mode)?options.mode:'single';return this.each(function(){if(!$(this).data('datepicker')){options.el=this;if(options.date.constructor==String){options.date=parseDate(options.date,options.format);options.date.setHours(0,0,0,0);}
if(options.mode!='single'){if(options.date.constructor!=Array){options.date=[options.date.valueOf()];if(options.mode=='range'){options.date.push(((new Date(options.date[0])).setHours(23,59,59,0)).valueOf());}}else{for(var i=0;i<options.date.length;i++){options.date[i]=(parseDate(options.date[i],options.format).setHours(0,0,0,0)).valueOf();}
if(options.mode=='range'){options.date[1]=((new Date(options.date[1])).setHours(23,59,59,0)).valueOf();}}}else{options.date=options.date.valueOf();}
if(!options.current){options.current=new Date();}else{options.current=parseDate(options.current,options.format);}
options.current.setDate(1);options.current.setHours(0,0,0,0);var id=options.containerId;options.id=id;$(this).data('datepickerId',options.id);var cal=$(options.containerWrapper).attr('id',id).bind('click',click).data('datepicker',options);if(options.className){cal.addClass(options.className);}
var html='';for(var i=0;i<options.calendars;i++){cnt=options.starts;if(i>0){html+=tpl.space;}
html+=tmpl(tpl.head.join(''),{week:options.locale[options.localeKey].weekMin,prev:options.prev,next:options.next,day1:options.locale[options.localeKey].daysMin[(cnt++)%7],day2:options.locale[options.localeKey].daysMin[(cnt++)%7],day3:options.locale[options.localeKey].daysMin[(cnt++)%7],day4:options.locale[options.localeKey].daysMin[(cnt++)%7],day5:options.locale[options.localeKey].daysMin[(cnt++)%7],day6:options.locale[options.localeKey].daysMin[(cnt++)%7],day7:options.locale[options.localeKey].daysMin[(cnt++)%7]});}
cal.find('tr:first').append(html).find('table').addClass(views[options.view]);fill(cal.get(0));if(options.flat){cal.appendTo(this).show().css('position','relative');layout(cal.get(0));}else{cal.appendTo(document.body);$(this).bind(options.eventName,show);}}});},showPicker:function(){return this.each(function(){if($(this).data('datepickerId')){show.apply(this);}});},hidePicker:function(){return this.each(function(){if($(this).data('datepickerId')){$('#'+$(this).data('datepickerId')).hide();}});},setDate:function(date,shiftTo){return this.each(function(){if($(this).data('datepickerId')){var cal=$('#'+$(this).data('datepickerId'));var options=cal.data('datepicker');options.date=date;if(options.date.constructor==String){options.date=parseDate(options.date,options.format);options.date.setHours(0,0,0,0);}
if(options.mode!='single'){if(options.date.constructor!=Array){options.date=[options.date.valueOf()];if(options.mode=='range'){options.date.push(((new Date(options.date[0])).setHours(23,59,59,0)).valueOf());}}else{for(var i=0;i<options.date.length;i++){options.date[i]=(parseDate(options.date[i],options.format).setHours(0,0,0,0)).valueOf();}
if(options.mode=='range'){options.date[1]=((new Date(options.date[1])).setHours(23,59,59,0)).valueOf();}}}else{options.date=options.date.valueOf();}
if(shiftTo){options.current=new Date(options.mode!='single'?options.date[0]:options.date);}
fill(cal.get(0));}});},getDate:function(formated){if(this.size()>0){return prepareDate($('#'+$(this).data('datepickerId')).data('datepicker'))[formated?0:1];}},clear:function(){return this.each(function(){if($(this).data('datepickerId')){var cal=$('#'+$(this).data('datepickerId'));var options=cal.data('datepicker');if(options.mode!='single'){options.date=[];fill(cal.get(0));}}});},fixLayout:function(){return this.each(function(){if($(this).data('datepickerId')){var cal=$('#'+$(this).data('datepickerId'));var options=cal.data('datepicker');if(options.flat){layout(cal.get(0));}}});}};}();$.fn.extend({DatePicker:DatePicker.init,DatePickerHide:DatePicker.hidePicker,DatePickerShow:DatePicker.showPicker,DatePickerSetDate:DatePicker.setDate,DatePickerGetDate:DatePicker.getDate,DatePickerClear:DatePicker.clear,DatePickerLayout:DatePicker.fixLayout});})(jQuery);(function(){var cache={};this.tmpl=function tmpl(str,data){var fn=!/\W/.test(str)?cache[str]=cache[str]||tmpl(document.getElementById(str).innerHTML):new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};"+"with(obj){p.push('"+
str.replace(/[\r\t\n]/g," ").split("<%").join("\t").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("\t").join("');").split("%>").join("p.push('").split("\r").join("\\'")
+"');}return p.join('');");return data?fn(data):fn;};})();